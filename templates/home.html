<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yonexus - XP Tracker para Tibia</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
</head>
<body>
    <!-- LOADING OVERLAY GLOBAL -->
    <div id="globalLoading" class="loading-overlay" aria-busy="false">
        <div class="loading-box">
            <div class="spinner"></div>
            <div id="loadingText">Carregando...</div>
        </div>
    </div>

    <!-- HEADER -->
    <header>
        <div class="logo">Yonexus<span>.</span></div>
        <nav>
            <a href="#features">Recursos</a>
            <a href="#how">Como Funciona</a>
            <a href="#faq">D√∫vidas</a>
        </nav>

        <div class="auth-buttons">
            {% if current_user.is_authenticated %}
                <span class="welcome">Bem-vindo, {{ current_user.username }}</span>
                <form action="{{ url_for('logout') }}" method="post" style="display:inline;">
                    <button type="submit" class="btn-logout">Sair</button>
                </form>
                <button class="btn-register" onclick="window.location.href='/xp-tracker'">
                    Ir para o Tracker
                </button>
            {% else %}
                <button class="btn-login" onclick="openModal('login')">Entrar</button>
                <button class="btn-register" onclick="openModal('register')">Registrar</button>
            {% endif %}
        </div>
    </header>

    <!-- HERO -->
    <section class="hero">
        <h1>Rastreie sua Evolu√ß√£o no Tibia</h1>
        <p>Monitore seu progresso de XP com m√©tricas detalhadas, gr√°ficos interativos e planejamento de meta. Domine seu caminho at√© o pr√≥ximo n√≠vel!</p>
        {% if not current_user.is_authenticated %}
        <div>
            <button class="cta-button" onclick="openModal('register')">Come√ßar Agora</button>
            <a href="#features" class="cta-button cta-secondary">Saiba Mais</a>
        </div>
        {% else %}
        <div>
            <button class="cta-button" onclick="window.location.href='/xp-tracker'">
                Abrir XP Tracker
            </button>
        </div>
        {% endif %}

        {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash flash-error">
                {{ messages[-1] }}
            </div>
        {% endif %}
        {% endwith %}
    </section>

    <!-- FEATURES -->
    <section class="features" id="features">
        <h2>Recursos Poderosos</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>M√©tricas em Tempo Real</h3>
                <p>Visualize XP acumulado, progresso di√°rio, m√©dia de XP e estimativa de dias para atingir sua meta de n√≠vel.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üìà</div>
                <h3>Gr√°ficos Interativos</h3>
                <p>Acompanhe seu hist√≥rico de XP com gr√°ficos claros que mostram tend√™ncias e desempenho ao longo do tempo.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3>Metas Personaliz√°veis</h3>
                <p>Defina sua meta de n√≠vel, ajuste o XP inicial e customize sua meta di√°ria conforme sua disposi√ß√£o.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üîê</div>
                <h3>Seguro e Privado</h3>
                <p>Seus dados ficam armazenados com seguran√ßa. Apenas voc√™ tem acesso √†s suas m√©tricas e progresso.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>R√°pido e Leve</h3>
                <p>Interface responsiva que funciona em qualquer dispositivo. Registre XP em segundos!</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üåê</div>
                <h3>API TibiaData Integrada</h3>
                <p>Seus dados de personagem s√£o sincronizados com a API do Tibia automaticamente.</p>
            </div>
        </div>
    </section>

    <!-- HOW IT WORKS -->
    <section class="how-it-works" id="how">
        <h2>Como Funciona</h2>
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Crie sua Conta</h3>
                <p>Registre-se com email e crie uma senha segura em segundos.</p>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h3>Configure seu Personagem</h3>
                <p>Informe o nome exato do seu personagem Tibia. N√≥s buscamos os dados na API automaticamente.</p>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h3>Defina suas Metas</h3>
                <p>Escolha seu n√≠vel meta e quanto de XP deseja ganhar por dia.</p>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <h3>Rastreie o Progresso</h3>
                <p>Registre seus ganhos de XP di√°rios e acompanhe seu avan√ßo em tempo real.</p>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="faq" id="faq">
        <h2>Perguntas Frequentes</h2>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
                <span>O Yonexus √© seguro para usar?</span>
                <span class="faq-icon">‚ñº</span>
            </div>
            <div class="faq-answer">
                Sim! Usamos criptografia de senha com bcrypt, sess√µes seguras com Flask-Login e o banco de dados √© local no servidor. Seus dados nunca s√£o compartilhados.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
                <span>Posso ter m√∫ltiplos personagens?</span>
                <span class="faq-icon">‚ñº</span>
            </div>
            <div class="faq-answer">
                No momento, o Yonexus suporta um personagem por conta. Voc√™ pode trocar de personagem alterando o nome nas configura√ß√µes (isso zera o hist√≥rico atual).
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
                <span>Como os dados s√£o sincronizados?</span>
                <span class="faq-icon">‚ñº</span>
            </div>
            <div class="faq-answer">
                Voc√™ registra manualmente seus ganhos de XP no tracker. Os dados do personagem (n√≠vel, voca√ß√£o, mundo) s√£o buscados da API TibiaData quando necess√°rio.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
                <span>Posso resetar meu hist√≥rico?</span>
                <span class="faq-icon">‚ñº</span>
            </div>
            <div class="faq-answer">
                Sim! Nas configura√ß√µes do tracker, voc√™ encontra a op√ß√£o "Zerar Hist√≥rico" que limpa todos os registros de XP, permitindo come√ßar do zero.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
                <span>O que √© a meta di√°ria?</span>
                <span class="faq-icon">‚ñº</span>
            </div>
            <div class="faq-answer">
                √â uma meta de XP que voc√™ deseja ganhar por dia. O tracker mostra seu progresso em tempo real com uma barra de progresso visual.
            </div>
        </div>
    </section>

    <!-- CTA FINAL -->
    <section class="cta-final">
        <h2>Pronto para Come√ßar?</h2>
        <p>Junte-se a outros jogadores que est√£o rastreando sua evolu√ß√£o no Tibia com precis√£o e dedica√ß√£o!</p>
        {% if not current_user.is_authenticated %}
        <button class="cta-button" onclick="openModal('register')">Criar Conta Agora</button>
        {% else %}
        <button class="cta-button" onclick="window.location.href='/xp-tracker'">
            Abrir XP Tracker
        </button>
        {% endif %}
    </section>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2025 Yonexus. Desenvolvido com ‚ù§Ô∏è para a comunidade Tibia.</p>
    </footer>

    <!-- LOGIN MODAL -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('login')">‚úï</button>
            <h2>Entrar</h2>
            <p class="modal-subtitle">Acesse seu painel de m√©tricas e continue de onde parou.</p>
            <form onsubmit="submitLogin(event)">
                <div class="form-group">
                    <label>Usu√°rio ou Email</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="form-submit">Entrar</button>
                <div class="toggle-form">
                    N√£o tem conta? <a onclick="switchModal('register')">Criar uma</a>
                </div>
            </form>
        </div>
    </div>

    <!-- REGISTER MODAL (AGORA EM 2 ETAPAS) -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('register')">‚úï</button>

            <!-- ETAPA 1 -->
            <div id="regStep1">
                <h2>Criar Conta</h2>
                <p class="modal-subtitle">Etapa 1 de 2 ‚Ä¢ Conta</p>

                <div class="form-group">
                    <label>Usu√°rio</label>
                    <input type="text" id="regUsername" required>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="regEmail" required>
                </div>

                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="regPassword" required>
                </div>

                <button type="button" class="form-submit" onclick="goToRegStep2()">
                    Pr√≥ximo
                </button>

                <div class="toggle-form">
                    J√° tem conta? <a onclick="switchModal('login')">Fazer Login</a>
                </div>
            </div>

            <!-- ETAPA 2 -->
            <div id="regStep2" style="display:none;">
                <h2>Configurar Personagem</h2>
                <p class="modal-subtitle">Etapa 2 de 2 ‚Ä¢ Tibia</p>

                <!-- mant√©m o mesmo submitRegister -->
                <form onsubmit="submitRegister(event)">
                    <div class="form-group">
                        <label>Nome do personagem (Tibia)</label>
                        <input type="text" id="regCharName" required onblur="onCharNameBlur()">
                        <div class="form-inline-help">
                            Use o nome exato do personagem, incluindo espa√ßos.
                        </div>
                        <div id="charPreview" class="char-preview" style="display:none;"></div>
                        <div id="charError" class="error-text" style="display:none;"></div>
                    </div>

                    <div class="form-row-2">
                        <div class="form-group">
                            <label>XP inicial (autom√°tico)</label>
                            <input type="number" id="regXpStart" min="0">
                            <div class="form-inline-help">
                                XP m√≠nimo do n√≠vel atual do personagem. Voc√™ pode ajustar para cima.
                            </div>
                        </div>

                        <div class="form-group">
                            <label>N√≠vel meta</label>
                            <select id="regGoalLevel"></select>
                            <div class="form-inline-help">
                                Deve ser maior que o n√≠vel atual.
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Meta de XP di√°ria</label>
                        <input type="number" id="regDailyGoal">
                        <div class="form-inline-help">
                            Padr√£o: 1.000.000 (voc√™ pode mudar depois nas configura√ß√µes).
                        </div>
                    </div>

                    <div class="form-group">
                        <div id="goalXpPreview" class="form-inline-help"></div>
                    </div>

                    <button type="submit" id="regSubmitBtn" class="form-submit" disabled>
                        Criar Conta
                    </button>

                    <button
                        type="button"
                        class="form-submit"
                        style="margin-top:8px;background:#020617;color:#e5e7eb;border:1px solid var(--border);"
                        onclick="goToRegStep1()"
                    >
                        Voltar
                    </button>

                    <div class="toggle-form">
                        J√° tem conta? <a onclick="switchModal('login')">Fazer Login</a>
                    </div>
                </form>
            </div>

        </div>
    </div>

    <script src="{{ url_for('static', filename='js/home.js') }}"></script>
</body>
</html>
